<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Runner</title>
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/language.css">
    <link rel="icon" href="images/p1down.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
    <div class="background-image"></div>
    <div class="content">
        <h1 class="custom-title" data-lang-key="mainTitle">Space Runner</h1>
        <button class="btn-start" data-lang-key="btnOne" onclick="goOnePlayer()">1 joueur</button>
        <button class="btn-start" data-lang-key="btnTwo" onclick="goTwoPlayersMode()">2 joueurs</button>
        <button class="btn-start" data-lang-key="scores" onclick="goHighScores()">Scores</button>
        <button class="btn-start" data-lang-key="credits" onclick="goCredits()">Crédit</button>
    </div>

    <!-- Langue Section -->
    <img src="images/flags/fr.png" alt="Change Language" id="language-icon" onclick="toggleLanguageModal()">

    <div class="language-modal" id="languageModal">
        <div class="language-options">
            <img src="images/flags/fr.png" alt="Français" onclick="setLanguage('fr'); toggleLanguageModal();">
            <img src="images/flags/en.png" alt="English" onclick="setLanguage('en'); toggleLanguageModal();">
            <img src="images/flags/pt.png" alt="Português" onclick="setLanguage('pt'); toggleLanguageModal();">
        </div>
    </div>

    <script src="common_functions/navigation.js"></script>
    <script src="common_functions/set_data.js"></script>
    <script src="common_functions/get_data.js"></script>
    <script src="common_functions/translation.js"></script>
    <script src="common_functions/languages.js"></script>
    <script>
        function saveLanguage(language_name) {
            var lang = language_name
            var dataString = JSON.stringify(lang);
            localStorage.setItem('language', dataString);
        }

        function setLanguage(lang) {
            updateLanguageSettings(lang)
            saveLanguage(lang)
            updateLanguageIcon(lang)
        }

        function toggleLanguageModal() {
            const modal = document.getElementById("languageModal");
            modal.classList.toggle("active");
        }

        function updateLanguageIcon(lang) {
            const languageIcon = document.getElementById("language-icon");
            languageIcon.src = `images/flags/${lang}.png`;
        }

        updateLanguageIcon(retrieveLanguage())
    </script>
</body>
</html>
