<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Runner</title>
    <link rel="stylesheet" href="../../css/default.css">
    <link rel="stylesheet" href="../../css/style_volume.css">
    <link rel="icon" href="../../images/p1down.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C8DGYXCTDV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C8DGYXCTDV');
</script>
<body>
    <div class="background-image"></div>
    <div class="content">
        <h1 class="custom-title" data-lang-key="volume">Volume</h1>
        <div class="inline-container">
            <div class="inline">
                <h5 data-lang-key="ajustSound">Utilisez la barre pour ajuster le volume des sons</h5>
                <div class="volume-container">
                    <input type="range" id="volumeControl" min="0" max="1" step="0.02" value="1" onchange="updateVolume(this.value)">
                </div>
                <h5><a data-lang-key="actualVolume">Volume actuel</a> : <a id="currentVolume">100%</a></h5>

                <button class="btn-start" onclick="testSound(globalVolume)" data-lang-key="testsound" >Tester un son</button>
            </div>

            <div class="inline">
                <h5 data-lang-key="ajustMusic">Utilisez la barre pour ajuster le volume de la musique</h5>
                <div class="volume-container">
                    <input type="range" id="musicControl" min="0" max="1" step="0.02" value="1" onchange="updateMusic(this.value)">
                </div>
                <h5><a data-lang-key="actualVolume">Volume actuel</a> : <a id="currentMusic">100%</a></h5>

                <button class="btn-start" onclick="TestMusic()" data-lang-key="testmusic" >Tester une musique</button>
            </div>
        </div>

        <button class="btn-start" onclick="goBackSettings()" data-lang-key="validate">Valider</button>
        <div class="btn-back">
            <a onclick="goBackSettings()">
                <img class="arrow_back" src="../../images/arrow_back.png" alt="Retour">
            </a>
        </div>
    </div>

    <script src="../../common_functions/navigation.js"></script>
    <script src="../../common_functions/translation.js"></script>
    <script src="../../common_functions/languages.js"></script>
    <script src="../../common_functions/set_data.js"></script>
    <script src="../../common_functions/sounds.js"></script>
    <script src="../../common_functions/background_music.js"></script>
    <script>
        let globalMusic = retrieveMusicLevel();

        // Met à jour l'affichage du volume au chargement de la page
        window.onload = function () {
            const volumeControl = document.getElementById('volumeControl');
            volumeControl.value = globalVolume; // Définit la valeur de l'input range
            const percentage = Math.round(globalVolume * 100); // Convertit en pourcentage
            document.getElementById('currentVolume').textContent = `${percentage}%`; // Met à jour l'affichage

            const musicControl = document.getElementById('musicControl');
            musicControl.value = globalMusic; // Définit la valeur de l'input range
            const percentageMusic = Math.round(globalMusic * 100); // Convertit en pourcentage
            document.getElementById('currentMusic').textContent = `${percentageMusic}%`; // Met à jour l'affichage
        };

        selectedVolume = globalVolume;
        selectedMusic = globalMusic;

        // Met à jour le volume global et l'affiche dans la console
        function updateVolume(value) {
            setSoundLevel(value);

            globalVolume = parseFloat(value); // Convertit la valeur en nombre
            const percentage = Math.round(globalVolume * 100); // Met à jour l'affichage du volume dans la page
            document.getElementById('currentVolume').textContent = `${percentage}%`;
        }


        // Met à jour le volume global et l'affiche dans la console
        function updateMusic(value) {
            setMusicLevel(value);

            globalMusic = parseFloat(value); // Convertit la valeur en nombre
            const percentage = Math.round(globalMusic * 100); // Met à jour l'affichage du volume dans la page
            document.getElementById('currentMusic').textContent = `${percentage}%`;
        }
    </script>
</body>
</html>